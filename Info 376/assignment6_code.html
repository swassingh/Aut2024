<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>assignment6_code</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="assignment6_code_files/libs/clipboard/clipboard.min.js"></script>
<script src="assignment6_code_files/libs/quarto-html/quarto.js"></script>
<script src="assignment6_code_files/libs/quarto-html/popper.min.js"></script>
<script src="assignment6_code_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assignment6_code_files/libs/quarto-html/anchor.min.js"></script>
<link href="assignment6_code_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assignment6_code_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assignment6_code_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assignment6_code_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assignment6_code_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<p>Homepage finding task focuses on getting the most appropriate result at rank-1. What metric(s) would you use to evaluate the effectiveness of an algorithm for this task? Why? [2 points]</p>
<ul>
<li><p>I would use the Mean Reciprocal Rank (MRR) metric to evaluate the effectiveness of an algorithm for the Homepage Finding Task. This is because MRR evaluates the effectiveness of the searching algorithm by focusing on the rank of the first relevant documennt/result. the MRR metric is calculated by calculating the Reciprocal Rank (RR) for a set of queries and then taking the average of the RR values. The RR value is calculated by dividing 1 by the rank of the first relevant document.</p></li>
<li><p>As I mentioned before, the MRR is focused on the rank of the first relevant document. And since the Homepage Finding Task focuses on getting the most appropriate result at Rank-1 (the first relevant document), the MRR metric is the most appropriate metric to evaluate the effectiveness of an algorithm for this task.</p></li>
<li><p>Relevant Equations:</p>
<ul>
<li>RR = 1 ÷ Rank of First Relevant Document Retrieved</li>
<li>MRR = Σ RR ÷ Total Number of Queries</li>
</ul></li>
</ul>
<p>Explain the intuition behind R-precision. What are the best and the worst values of R-precision that you can get? [2 points]</p>
<ul>
<li>R-Precision is the precision (proportion of retrieved documents that are relevant) after the first R (number of relevant documents) documents have been retrieved. The idea behind R-Precision is to evaluate the effectiveness of a search algorithm by focusing on the precision of the first R relevant documents retrieved. The R-Precision metric is calculated by dividing the number of relevant documents retrieved by the total number of relevant documents in the collection.
<ul>
<li>Best Case R-Precision: 1.0 (All the first R documents retrieved are relevant)</li>
<li>Worst Case R-Precision: 0.0 (None of the first R documents retrieved are relevant)</li>
</ul></li>
<li>Relevant Equations:
<ul>
<li>R-Precision = (Number of Relevant Documents Retrieved) ÷ (Total Number of Relevant Documents)</li>
</ul></li>
</ul>
<p>Get ‘vaswani’ dataset and index it as done in the class. Prepare a dataframe with the following queries and perform retrieval using TFIDF, BM25, and language model. Compute MAP, reciprocal rank, and R-precision for a batch run experiment. Report these numbers and provide your brief comments comparing the three retrieval models. [6 points] | qid | query | |—–|—————————————| | 62 | fast transistor counters | | 63 | low pass lattice filters | | 70 | variable ultra high frequency attenuators | | 73 | transistor sweep generators | | 75 | optimising linear networks |</p>
<div id="cell-8" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyterrier <span class="im">as</span> pt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> pt.started():</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  pt.init()</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Fortu\AppData\Local\Temp\ipykernel_48640\2591423586.py:2: DeprecationWarning: Call to deprecated function (or staticmethod) started. (use pt.java.started() instead) -- Deprecated since version 0.11.0.
  if not pt.started():</code></pre>
</div>
</div>
<div id="cell-9" class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="op">=</span> pt.get_dataset(<span class="st">"vaswani"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>indexer <span class="op">=</span> pt.TRECCollectionIndexer(<span class="st">"c:/Users/Fortu/Downloads/Aut2024/Info 376/a_6_index"</span>) </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>indexref <span class="op">=</span> indexer.index(dataset.get_corpus())</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> pt.IndexFactory.of(indexref)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(index.getCollectionStatistics().toString())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of documents: 11429
Number of terms: 7756
Number of postings: 224573
Number of fields: 0
Number of tokens: 271581
Field names: []
Positions:   false
</code></pre>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>queries <span class="op">=</span> pd.DataFrame([[<span class="st">"62"</span>, <span class="st">"fast transistor counters"</span>],</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                        [<span class="st">"63"</span>, <span class="st">"low pass lattice filters"</span>],</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                        [<span class="st">"70"</span>, <span class="st">"variable ultra high frequency attenuators"</span>],</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                        [<span class="st">"73"</span>, <span class="st">"transistor sweep generators"</span>],</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                        [<span class="st">"75"</span>, <span class="st">"optimising linear networks"</span>]],columns<span class="op">=</span>[<span class="st">"qid"</span>,<span class="st">"query"</span>])</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>queries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">qid</th>
<th data-quarto-table-cell-role="th">query</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>62</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>63</td>
<td>low pass lattice filters</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>70</td>
<td>variable ultra high frequency attenuators</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>73</td>
<td>transistor sweep generators</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>75</td>
<td>optimising linear networks</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dataset.get_qrels())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     qid  docno  label
0      1   1239      1
1      1   1502      1
2      1   4462      1
3      1   4569      1
4      1   5472      1
...   ..    ...    ...
2078  93   9875      1
2079  93   9956      1
2080  93  10497      1
2081  93  11191      1
2082  93  11318      1

[2083 rows x 3 columns]</code></pre>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tf_idf <span class="op">=</span> pt.BatchRetrieve(index, wmodel<span class="op">=</span><span class="st">"TF_IDF"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>bm25 <span class="op">=</span> pt.BatchRetrieve(index, wmodel<span class="op">=</span><span class="st">"BM25"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>Hiemstra <span class="op">=</span> pt.BatchRetrieve(index, wmodel<span class="op">=</span><span class="st">"Hiemstra_LM"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Fortu\AppData\Local\Temp\ipykernel_48640\1887074501.py:1: DeprecationWarning: Call to deprecated class BatchRetrieve. (use pt.terrier.Retriever() instead) -- Deprecated since version 0.11.0.
  tf_idf = pt.BatchRetrieve(index, wmodel="TF_IDF")
C:\Users\Fortu\AppData\Local\Temp\ipykernel_48640\1887074501.py:2: DeprecationWarning: Call to deprecated class BatchRetrieve. (use pt.terrier.Retriever() instead) -- Deprecated since version 0.11.0.
  bm25 = pt.BatchRetrieve(index, wmodel="BM25")
C:\Users\Fortu\AppData\Local\Temp\ipykernel_48640\1887074501.py:3: DeprecationWarning: Call to deprecated class BatchRetrieve. (use pt.terrier.Retriever() instead) -- Deprecated since version 0.11.0.
  Hiemstra = pt.BatchRetrieve(index, wmodel="Hiemstra_LM")</code></pre>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tf_idf.transform(queries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">qid</th>
<th data-quarto-table-cell-role="th">docid</th>
<th data-quarto-table-cell-role="th">docno</th>
<th data-quarto-table-cell-role="th">rank</th>
<th data-quarto-table-cell-role="th">score</th>
<th data-quarto-table-cell-role="th">query</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>62</td>
<td>10356</td>
<td>10357</td>
<td>0</td>
<td>12.303227</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>62</td>
<td>8961</td>
<td>8962</td>
<td>1</td>
<td>10.037327</td>
<td>fast transistor counters</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>62</td>
<td>8340</td>
<td>8341</td>
<td>2</td>
<td>9.516181</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>62</td>
<td>1965</td>
<td>1966</td>
<td>3</td>
<td>9.121030</td>
<td>fast transistor counters</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>62</td>
<td>4710</td>
<td>4711</td>
<td>4</td>
<td>8.906797</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4735</td>
<td>75</td>
<td>6715</td>
<td>6716</td>
<td>921</td>
<td>1.347560</td>
<td>optimising linear networks</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4736</td>
<td>75</td>
<td>6763</td>
<td>6764</td>
<td>922</td>
<td>1.334390</td>
<td>optimising linear networks</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4737</td>
<td>75</td>
<td>4820</td>
<td>4821</td>
<td>923</td>
<td>1.296382</td>
<td>optimising linear networks</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4738</td>
<td>75</td>
<td>8240</td>
<td>8241</td>
<td>924</td>
<td>1.296382</td>
<td>optimising linear networks</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4739</td>
<td>75</td>
<td>4929</td>
<td>4930</td>
<td>925</td>
<td>1.194326</td>
<td>optimising linear networks</td>
</tr>
</tbody>
</table>

<p>4740 rows × 6 columns</p>
</div>
</div>
</div>
<div id="cell-14" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>bm25.transform(queries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">qid</th>
<th data-quarto-table-cell-role="th">docid</th>
<th data-quarto-table-cell-role="th">docno</th>
<th data-quarto-table-cell-role="th">rank</th>
<th data-quarto-table-cell-role="th">score</th>
<th data-quarto-table-cell-role="th">query</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>62</td>
<td>10356</td>
<td>10357</td>
<td>0</td>
<td>22.281739</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>62</td>
<td>8961</td>
<td>8962</td>
<td>1</td>
<td>18.164384</td>
<td>fast transistor counters</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>62</td>
<td>8340</td>
<td>8341</td>
<td>2</td>
<td>17.157584</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>62</td>
<td>1965</td>
<td>1966</td>
<td>3</td>
<td>16.409894</td>
<td>fast transistor counters</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>62</td>
<td>4710</td>
<td>4711</td>
<td>4</td>
<td>16.051816</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4735</td>
<td>75</td>
<td>6715</td>
<td>6716</td>
<td>921</td>
<td>2.381950</td>
<td>optimising linear networks</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4736</td>
<td>75</td>
<td>6763</td>
<td>6764</td>
<td>922</td>
<td>2.358671</td>
<td>optimising linear networks</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4737</td>
<td>75</td>
<td>4820</td>
<td>4821</td>
<td>923</td>
<td>2.291488</td>
<td>optimising linear networks</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4738</td>
<td>75</td>
<td>8240</td>
<td>8241</td>
<td>924</td>
<td>2.291488</td>
<td>optimising linear networks</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4739</td>
<td>75</td>
<td>4929</td>
<td>4930</td>
<td>925</td>
<td>2.111093</td>
<td>optimising linear networks</td>
</tr>
</tbody>
</table>

<p>4740 rows × 6 columns</p>
</div>
</div>
</div>
<div id="cell-15" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Hiemstra.transform(queries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">qid</th>
<th data-quarto-table-cell-role="th">docid</th>
<th data-quarto-table-cell-role="th">docno</th>
<th data-quarto-table-cell-role="th">rank</th>
<th data-quarto-table-cell-role="th">score</th>
<th data-quarto-table-cell-role="th">query</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>62</td>
<td>10356</td>
<td>10357</td>
<td>0</td>
<td>11.963904</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>62</td>
<td>1965</td>
<td>1966</td>
<td>1</td>
<td>10.578431</td>
<td>fast transistor counters</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>62</td>
<td>8961</td>
<td>8962</td>
<td>2</td>
<td>10.037904</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>62</td>
<td>4710</td>
<td>4711</td>
<td>3</td>
<td>9.583759</td>
<td>fast transistor counters</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>62</td>
<td>8340</td>
<td>8341</td>
<td>4</td>
<td>9.469847</td>
<td>fast transistor counters</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4735</td>
<td>75</td>
<td>6715</td>
<td>6716</td>
<td>921</td>
<td>0.779075</td>
<td>optimising linear networks</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4736</td>
<td>75</td>
<td>6763</td>
<td>6764</td>
<td>922</td>
<td>0.770195</td>
<td>optimising linear networks</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4737</td>
<td>75</td>
<td>4820</td>
<td>4821</td>
<td>923</td>
<td>0.744756</td>
<td>optimising linear networks</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4738</td>
<td>75</td>
<td>8240</td>
<td>8241</td>
<td>924</td>
<td>0.744756</td>
<td>optimising linear networks</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4739</td>
<td>75</td>
<td>4929</td>
<td>4930</td>
<td>925</td>
<td>0.677779</td>
<td>optimising linear networks</td>
</tr>
</tbody>
</table>

<p>4740 rows × 6 columns</p>
</div>
</div>
</div>
<div id="cell-16" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>pt.Experiment(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    [tf_idf, bm25, Hiemstra],</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    queries,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    dataset.get_qrels(),</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"map"</span>, <span class="st">"recip_rank"</span>, <span class="st">"Rprec"</span>]</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">map</th>
<th data-quarto-table-cell-role="th">recip_rank</th>
<th data-quarto-table-cell-role="th">Rprec</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>TerrierRetr(TF_IDF)</td>
<td>0.448187</td>
<td>0.840</td>
<td>0.455642</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>TerrierRetr(BM25)</td>
<td>0.449766</td>
<td>0.850</td>
<td>0.462309</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>TerrierRetr(Hiemstra_LM)</td>
<td>0.392385</td>
<td>0.825</td>
<td>0.352756</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>